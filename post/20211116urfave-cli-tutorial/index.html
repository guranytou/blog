<!doctype html><html lang=ja-jp>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<title>urfave/cliのチュートリアルをやってみた - しゅがーぽっと</title>
<meta name=description content="前書き Goの勉強をするのにCLIをいくつか作りたくて、urfave/cliのチュートリアルをサクッとやりました。
リッチなCLIを作りたいのであればcobraがいいんでしょうが、今回を含めていくつかのCLIはスナック感覚で作りたかったのでurfave/cliを選定しました。
書いたコード https://github.com/guranytou/GoStudy/tree/master/greet 雑に勉強する用リポジトリにテキトーにサクッと投げた図。
package main import ( &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;github.com/urfave/cli/v2&#34; ) func main() { app := cli.NewApp() app.Name = &#34;greet&#34; app.Usage = &#34;Give a goo greeting.&#34; app.Version = &#34;0.0.1&#34; app.Action = func(c *cli.Context) error { fmt.Println(&#34;Hello&#34;) return nil } err := app.Run(os.Args) if err != nil { log.Fatal(err) } } 動作確認  まずはそもそも問題なく動くのか確認。  $ go run main.go Hello  作成したコマンドをインストールする  $ go install  実行してみる  $ greet Hello まとめとか サクッと作れました。以下のコマンドをサクッと作ってみてGoに慣れていこうかなあと思ってます。">
<meta name=author content="guranytou">
<link rel="preload stylesheet" as=style href=https://guranytou.github.io/blog/app.min.css>
<link rel="preload stylesheet" as=style href=https://guranytou.github.io/blog/an-old-hope.min.css>
<script defer src=https://guranytou.github.io/blog/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://guranytou.github.io/blog/theme.png>
<link rel=preload as=image href=https://guranytou.github.io/blog/twitter.svg>
<link rel=preload as=image href=https://guranytou.github.io/blog/github.svg>
<link rel=icon href=https://guranytou.github.io/blog/favicon.ico>
<link rel=apple-touch-icon href=https://guranytou.github.io/blog/apple-touch-icon.png>
<meta name=generator content="Hugo 0.88.0">
<meta property="og:title" content="urfave/cliのチュートリアルをやってみた">
<meta property="og:description" content="前書き Goの勉強をするのにCLIをいくつか作りたくて、urfave/cliのチュートリアルをサクッとやりました。
リッチなCLIを作りたいのであればcobraがいいんでしょうが、今回を含めていくつかのCLIはスナック感覚で作りたかったのでurfave/cliを選定しました。
書いたコード https://github.com/guranytou/GoStudy/tree/master/greet 雑に勉強する用リポジトリにテキトーにサクッと投げた図。
package main import ( &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;github.com/urfave/cli/v2&#34; ) func main() { app := cli.NewApp() app.Name = &#34;greet&#34; app.Usage = &#34;Give a goo greeting.&#34; app.Version = &#34;0.0.1&#34; app.Action = func(c *cli.Context) error { fmt.Println(&#34;Hello&#34;) return nil } err := app.Run(os.Args) if err != nil { log.Fatal(err) } } 動作確認  まずはそもそも問題なく動くのか確認。  $ go run main.go Hello  作成したコマンドをインストールする  $ go install  実行してみる  $ greet Hello まとめとか サクッと作れました。以下のコマンドをサクッと作ってみてGoに慣れていこうかなあと思ってます。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://guranytou.github.io/blog/post/20211116urfave-cli-tutorial/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2021-11-16T00:05:27+09:00">
<meta property="article:modified_time" content="2021-11-16T00:05:27+09:00">
<meta itemprop=name content="urfave/cliのチュートリアルをやってみた">
<meta itemprop=description content="前書き Goの勉強をするのにCLIをいくつか作りたくて、urfave/cliのチュートリアルをサクッとやりました。
リッチなCLIを作りたいのであればcobraがいいんでしょうが、今回を含めていくつかのCLIはスナック感覚で作りたかったのでurfave/cliを選定しました。
書いたコード https://github.com/guranytou/GoStudy/tree/master/greet 雑に勉強する用リポジトリにテキトーにサクッと投げた図。
package main import ( &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;github.com/urfave/cli/v2&#34; ) func main() { app := cli.NewApp() app.Name = &#34;greet&#34; app.Usage = &#34;Give a goo greeting.&#34; app.Version = &#34;0.0.1&#34; app.Action = func(c *cli.Context) error { fmt.Println(&#34;Hello&#34;) return nil } err := app.Run(os.Args) if err != nil { log.Fatal(err) } } 動作確認  まずはそもそも問題なく動くのか確認。  $ go run main.go Hello  作成したコマンドをインストールする  $ go install  実行してみる  $ greet Hello まとめとか サクッと作れました。以下のコマンドをサクッと作ってみてGoに慣れていこうかなあと思ってます。"><meta itemprop=datePublished content="2021-11-16T00:05:27+09:00">
<meta itemprop=dateModified content="2021-11-16T00:05:27+09:00">
<meta itemprop=wordCount content="78">
<meta itemprop=keywords content="Go,">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="urfave/cliのチュートリアルをやってみた">
<meta name=twitter:description content="前書き Goの勉強をするのにCLIをいくつか作りたくて、urfave/cliのチュートリアルをサクッとやりました。
リッチなCLIを作りたいのであればcobraがいいんでしょうが、今回を含めていくつかのCLIはスナック感覚で作りたかったのでurfave/cliを選定しました。
書いたコード https://github.com/guranytou/GoStudy/tree/master/greet 雑に勉強する用リポジトリにテキトーにサクッと投げた図。
package main import ( &#34;fmt&#34; &#34;log&#34; &#34;os&#34; &#34;github.com/urfave/cli/v2&#34; ) func main() { app := cli.NewApp() app.Name = &#34;greet&#34; app.Usage = &#34;Give a goo greeting.&#34; app.Version = &#34;0.0.1&#34; app.Action = func(c *cli.Context) error { fmt.Println(&#34;Hello&#34;) return nil } err := app.Run(os.Args) if err != nil { log.Fatal(err) } } 動作確認  まずはそもそも問題なく動くのか確認。  $ go run main.go Hello  作成したコマンドをインストールする  $ go install  実行してみる  $ greet Hello まとめとか サクッと作れました。以下のコマンドをサクッと作ってみてGoに慣れていこうかなあと思ってます。">
</head>
<body class=not-ready data-menu=true>
<header class=header>
<p class=logo>
<a class=site-name href=https://guranytou.github.io/blog/>しゅがーぽっと</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
<nav class=menu>
<a href=/blog/resume/></a>
<a href=/blog/about/>About</a>
</nav>
<nav class=social>
<a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/gurany_tou target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/guranytou target=_blank></a>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<aside>
<time>November 16, 2021</time>
<span>guranytou</span>
</aside>
<h1>urfave/cliのチュートリアルをやってみた</h1>
</header>
<section class=post-content><h1 id=前書き>前書き</h1>
<p>Goの勉強をするのにCLIをいくつか作りたくて、<a href=https://github.com/urfave/cli>urfave/cli</a>のチュートリアルをサクッとやりました。<br>
リッチなCLIを作りたいのであれば<a href=https://github.com/spf13/cobra>cobra</a>がいいんでしょうが、今回を含めていくつかのCLIはスナック感覚で作りたかったのでurfave/cliを選定しました。</p>
<h1 id=書いたコード>書いたコード</h1>
<p><a href=https://github.com/guranytou/GoStudy/tree/master/greet>https://github.com/guranytou/GoStudy/tree/master/greet</a>
雑に勉強する用リポジトリにテキトーにサクッと投げた図。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang:main.go data-lang=golang:main.go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;log&#34;</span>
	<span style=color:#e6db74>&#34;os&#34;</span>

	<span style=color:#e6db74>&#34;github.com/urfave/cli/v2&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#a6e22e>app</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>cli</span>.<span style=color:#a6e22e>NewApp</span>()
	<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Name</span> = <span style=color:#e6db74>&#34;greet&#34;</span>
	<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Usage</span> = <span style=color:#e6db74>&#34;Give a goo greeting.&#34;</span>
	<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Version</span> = <span style=color:#e6db74>&#34;0.0.1&#34;</span>
	<span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Action</span> = <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>cli</span>.<span style=color:#a6e22e>Context</span>) <span style=color:#66d9ef>error</span> {
		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Hello&#34;</span>)
		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
	}

	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Args</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
	}
}
</code></pre></div><h1 id=動作確認>動作確認</h1>
<ul>
<li>まずはそもそも問題なく動くのか確認。</li>
</ul>
<pre tabindex=0><code>$ go run main.go
Hello
</code></pre><ul>
<li>作成したコマンドをインストールする</li>
</ul>
<pre tabindex=0><code>$ go install
</code></pre><ul>
<li>実行してみる</li>
</ul>
<pre tabindex=0><code>$ greet
Hello
</code></pre><h1 id=まとめとか>まとめとか</h1>
<p>サクッと作れました。以下のコマンドをサクッと作ってみてGoに慣れていこうかなあと思ってます。</p>
<ul>
<li>おみくじ
<ul>
<li>よくあるネタ</li>
</ul>
</li>
<li>天気予報
<ul>
<li>最初はコマンドを打つと東京だけ教えてくれる</li>
<li>ゆくゆくは地名を指定するとそこの天気を教えてくれるようになる、といいなあ</li>
</ul>
</li>
<li>terraform関連ツール
<ul>
<li>terraform&Goの勉強をかねて</li>
</ul>
</li>
</ul>
</section>
<footer class=post-tags>
<a href=https://guranytou.github.io/blog/tags/go>Go</a>
</footer>
<nav class=post-nav>
<a class=prev href=https://guranytou.github.io/blog/post/20211117-create-omikuji/><span>←</span><span>簡易なおみくじができるCLIを作った</span></a>
<a class=next href=https://guranytou.github.io/blog/post/20211025-git-sub-account/><span>gitのサブアカウント設定方法作成</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2022 <a href=https://guranytou.github.io/blog/>しゅがーぽっと</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.0</a>
</p>
</footer>
</body>
</html>